{% extends 'base.html' %}
{% load static %}

{% block title %}Administration - Tableau de bord{% endblock %}

{% block content %}
<link rel="stylesheet" href="/static/css/admin.css">

<div class="admin-dashboard container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h3 mb-0">Tableau de bord</h1>
      <small class="text-muted">Vue rapide des ressources du site</small>
    </div>
    <div>
      <a href="/admin/" class="btn btn-outline-secondary me-2">Admin Django</a>
      <a href="{% url 'home' %}" class="btn btn-secondary">Voir le site</a>
    </div>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <div class="card stat-card shadow-sm">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stat-icon bg-primary text-white me-3"><i class="fas fa-cogs"></i></div>
            <div>
              <div class="small text-muted">Services</div>
              <div class="h4 mb-0">{{ services_count }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card stat-card shadow-sm">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stat-icon bg-success text-white me-3"><i class="fas fa-project-diagram"></i></div>
            <div>
              <div class="small text-muted">Projets</div>
              <div class="h4 mb-0">{{ projects_count }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card stat-card shadow-sm">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stat-icon bg-warning text-white me-3"><i class="fas fa-users"></i></div>
            <div>
              <div class="small text-muted">Équipe</div>
              <div class="h4 mb-0">{{ team_count }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card stat-card shadow-sm">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stat-icon bg-danger text-white me-3"><i class="fas fa-envelope"></i></div>
            <div>
              <div class="small text-muted">Demandes de contact</div>
              <div class="h4 mb-0">{{ contacts_count }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-8">
      <div class="card shadow-sm mb-3">
        <div class="card-header">Dernières demandes de contact</div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Sujet</th>
                  <th>Email</th>
                  <th>Téléphone</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                {% for c in recent_contacts %}
                <tr>
                  <td>{{ c.name }}</td>
                  <td>{{ c.subject }}</td>
                  <td>{{ c.email }}</td>
                  <td>{{ c.phone }}</td>
                  <td>{{ c.created_at|date:"Y-m-d H:i" }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center small text-muted">Aucune demande récente</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card shadow-sm mb-3">
        <div class="card-header">Raccourcis</div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <a href="/admin/sicmi_app/service/add/" class="btn btn-outline-primary">Ajouter un service</a>
            <a href="/admin/sicmi_app/project/add/" class="btn btn-outline-success">Ajouter un projet</a>
            <a href="/admin/sicmi_app/teammember/add/" class="btn btn-outline-warning">Ajouter un membre d'équipe</a>
            <a href="/admin/sicmi_app/contactrequest/" class="btn btn-outline-danger">Voir toutes les demandes</a>
          </div>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-header">À propos</div>
        <div class="card-body small text-muted">
          Interface d'administration simplifiée. Pour gérer en détail, utilisez l'admin Django complet.
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
